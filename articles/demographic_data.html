<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>A Deep Dive into Colombian Demographics Using ColOpenData • ColOpenData</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A Deep Dive into Colombian Demographics Using ColOpenData">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="https://epiverse-trace.github.io/blueprints/logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">ColOpenData</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Documentation and Dictionaries</h6></li>
    <li><a class="dropdown-item" href="../articles/documentation_and_dictionaries.html">Documentation and Dictionaries</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Download data</h6></li>
    <li><a class="dropdown-item" href="../articles/demographic_data.html">A Deep Dive into Colombian Demographics Using ColOpenData</a></li>
    <li><a class="dropdown-item" href="../articles/geospatial_data.html">Maps and plots with ColOpenData</a></li>
    <li><a class="dropdown-item" href="../articles/climate_data.html">How to download climate data using ColOpenData</a></li>
    <li><a class="dropdown-item" href="../articles/population_projections.html">Population Projections with ColOpenData</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Merge data</h6></li>
    <li><a class="dropdown-item" href="../articles/merge_geo_demographic.html">Integration of Geospatial and Demographic data</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiverse-trace/ColOpenData/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>A Deep Dive into Colombian Demographics Using ColOpenData</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/ColOpenData/blob/main/vignettes/demographic_data.Rmd" class="external-link"><code>vignettes/demographic_data.Rmd</code></a></small>
      <div class="d-none name"><code>demographic_data.Rmd</code></div>
    </div>

    
    
<div style="text-align: justify;">
<p><strong>ColOpenData</strong> can be used to access open demographic
data from Colombia. This demographic data is retrieved from the National
Administrative Department of Statistics (<a href="https://www.dane.gov.co/index.php/estadisticas-por-tema" class="external-link">DANE</a>).
The demographic module allows you to consult demographic data from the
National Population and Dwelling Census (CNPV) of 2018 and Population
Projections.</p>
<p>The available CNPV information is divided in four categories:
households, persons demographic, persons social and dwellings. The
population projections information presents data from 1950 to 2070 for a
national level, from 1985 to 2050 for a departmental level and from 1985
to 2035 for a municipal level. All data documentation can be accessed as
explained at <a href="https://epiverse-trace.github.io/ColOpenData/articles/documentation_and_dictionaries.html">Documentation
and Dictionaries</a>.</p>
<p>In this vignette you will learn:</p>
<ol style="list-style-type: decimal">
<li>How to download demographic data using
<strong>ColOpenData</strong>.</li>
<li>How to filter, group, mutate and aggregate demographic data.</li>
<li>How to visualize data using <strong>ggplot2</strong>.</li>
</ol>
<p>As the goal of this vignette is to show some examples on how to use
the data, we will load some specific libraries but that does not mean
they are required to use the data in all cases.</p>
<p>In order to access its documentation we need to use the function
<code><a href="../reference/list_datasets.html">list_datasets()</a></code> and indicate as a parameter the module we
are interested in. It is important to take a good look at this to have a
clearer understanding of what we count with, before just throwing
ourselves to work with the data. Now, we should start by loading all
necessary libraries.</p>
</div>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/epiverse-trace/ColOpenData" class="external-link">ColOpenData</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<div style="text-align: justify;">
<p><strong>Disclaimer: all data is loaded to the environment in the
user’s R session, but is not downloaded to user’s computer.</strong></p>
</div>
<div class="section level2">
<h2 id="initial-exploration-basic-data-handling-with-colopendata">Initial Exploration: Basic Data Handling with ColOpenData<a class="anchor" aria-label="anchor" href="#initial-exploration-basic-data-handling-with-colopendata"></a>
</h2>
<div class="section level3">
<h3 id="documentation-access">Documentation access<a class="anchor" aria-label="anchor" href="#documentation-access"></a>
</h3>
<div style="text-align: justify;">
<p>First, we have to access the demographic documentation, to check
available datasets.</p>
</div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datasets_dem</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/list_datasets.html">list_datasets</a></span><span class="op">(</span>module <span class="op">=</span> <span class="st">"demographic"</span>, language <span class="op">=</span> <span class="st">"EN"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">datasets_dem</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 7</span></span></span>
<span><span class="co">#&gt;   name                group       source year  level        category description</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> DANE_CNPVH_2018_1HD demographic DANE   2018  department   househo… Number of …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> DANE_CNPVH_2018_1HM demographic DANE   2018  municipality househo… Number of …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> DANE_CNPVH_2018_2HD demographic DANE   2018  department   househo… Number of …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> DANE_CNPVH_2018_2HM demographic DANE   2018  municipality househo… Number of …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> DANE_CNPVH_2018_3HD demographic DANE   2018  department   househo… Households…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> DANE_CNPVH_2018_3HM demographic DANE   2018  municipality househo… Households…</span></span></code></pre></div>
<div style="text-align: justify;">
<p>After checking the documentation, we can load the data we want to
work with. To do this, we will use the
<code><a href="../reference/download_demographic.html">download_demographic()</a></code> function that takes by parameter the
dataset name, presented in the documentation. For this first example we
will focus on a CNPV dataset.</p>
</div>
</div>
<div class="section level3">
<h3 id="data-load">Data load<a class="anchor" aria-label="anchor" href="#data-load"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">public_services_d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/download_demographic.html">download_demographic</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"DANE_CNPVV_2018_8VD"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Original data is retrieved from the National Administrative Department</span></span>
<span><span class="co">#&gt; of Statistics (Departamento Administrativo Nacional de Estadística -</span></span>
<span><span class="co">#&gt; DANE).</span></span>
<span><span class="co">#&gt; Reformatted by package authors.</span></span>
<span><span class="co">#&gt; Stored by Universidad de Los Andes under the Epiverse TRACE iniative.</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">public_services_d</span><span class="op">)</span></span>
<span><span class="co">#&gt;   codigo_departamento   departamento     area  servicio_publico      disponible</span></span>
<span><span class="co">#&gt; 1                  00 Total nacional    total energia_electrica              si</span></span>
<span><span class="co">#&gt; 2                  00 Total nacional    total energia_electrica              no</span></span>
<span><span class="co">#&gt; 3                  00 Total nacional    total energia_electrica sin_informacion</span></span>
<span><span class="co">#&gt; 4                  00 Total nacional cabecera energia_electrica              si</span></span>
<span><span class="co">#&gt; 5                  00 Total nacional cabecera energia_electrica              no</span></span>
<span><span class="co">#&gt; 6                  00 Total nacional cabecera energia_electrica sin_informacion</span></span>
<span><span class="co">#&gt;      total</span></span>
<span><span class="co">#&gt; 1 12984126</span></span>
<span><span class="co">#&gt; 2   496603</span></span>
<span><span class="co">#&gt; 3        0</span></span>
<span><span class="co">#&gt; 4 10485896</span></span>
<span><span class="co">#&gt; 5    81579</span></span>
<span><span class="co">#&gt; 6        0</span></span></code></pre></div>
<div style="text-align: justify;">
<p>As it can be seen above, <u>public_services_d</u> presents
information regarding availability of public services in the country at
the department level. Now, with this data we could, for example, find
the proportion of dwellings that have access to a water supply system
(WSS) by department and plot it.</p>
</div>
</div>
<div class="section level3">
<h3 id="data-filter-and-plot">Data filter and plot<a class="anchor" aria-label="anchor" href="#data-filter-and-plot"></a>
</h3>
<p>First we will subset the data so it presents the information
regarding the WSS by department.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wss</span> <span class="op">&lt;-</span> <span class="va">public_services_d</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">area</span> <span class="op">==</span> <span class="st">"total_departamental"</span>,</span>
<span>    <span class="va">servicio_publico</span> <span class="op">==</span> <span class="st">"acueducto"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">departamento</span>, <span class="va">disponible</span>, <span class="va">total</span><span class="op">)</span></span></code></pre></div>
<p>With the subset, we can calculate the total counts by department.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">total_counts</span> <span class="op">&lt;-</span> <span class="va">wss</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">departamento</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>total_all <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">total</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Then, we can calculate the proportions of “yes” (“si”) by
department.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">proportions_wss</span> <span class="op">&lt;-</span> <span class="va">wss</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">disponible</span> <span class="op">==</span> <span class="st">"si"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">total_counts</span>, by <span class="op">=</span> <span class="st">"departamento"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>proportion_si <span class="op">=</span> <span class="va">total</span> <span class="op">/</span> <span class="va">total_all</span><span class="op">)</span></span></code></pre></div>
<p>For plotting purposes, we will change the name of “San Andrés”, since
the complete name is too long.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">proportions_wss</span><span class="op">[</span><span class="fl">28</span>, <span class="st">"departamento"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"SAPSC"</span></span></code></pre></div>
<p>Finally, we can plot the results</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">proportions_wss</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">departamento</span>, <span class="op">-</span><span class="va">proportion_si</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="va">proportion_si</span></span>
<span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, fill <span class="op">=</span> <span class="st">"#10bed2"</span>, color <span class="op">=</span> <span class="st">"black"</span>, width <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Proportion of dwellings with access to WSS by department"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Department"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Proportion"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    plot.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"white"</span>, colour <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span>,</span>
<span>    panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"white"</span>, colour <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span>,</span>
<span>    axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>    plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="demographic_data_files/figure-html/plot%20wss-1.png" width="768"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Maria Camila Tavera-Cifuentes, Julian Otero.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
