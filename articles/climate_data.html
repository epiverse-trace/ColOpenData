<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ColOpenData">
<title>How to download climate data using ColOpenData • ColOpenData</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="How to download climate data using ColOpenData">
<meta property="og:description" content="ColOpenData">
<meta property="og:image" content="/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="../logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">ColOpenData</a>

    <small class="nav-text text-muted me-auto version-number" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/climate_data.html">How to download climate data using ColOpenData</a>
    <a class="dropdown-item" href="../articles/demographic_data.html">Download and use of demographic data</a>
    <a class="dropdown-item" href="../articles/documentation_and_dictionaries.html">Documentation and Dictionaries</a>
    <a class="dropdown-item" href="../articles/geospatial_data.html">Maps and plots with ColOpenData</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/epiverse-trace/ColOpenData/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="climate_data_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="climate_data_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="climate_data_files/leaflet-1.3.1/leaflet.js"></script><link href="climate_data_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="climate_data_files/proj4-2.6.2/proj4.min.js"></script><script src="climate_data_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="climate_data_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="climate_data_files/leaflet-binding-2.2.1/leaflet.js"></script><script src="climate_data_files/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script><script src="climate_data_files/leaflet-providers-plugin-2.2.1/leaflet-providers-plugin.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>How to download climate data using ColOpenData</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/ColOpenData/blob/HEAD/vignettes/climate_data.Rmd" class="external-link"><code>vignettes/climate_data.Rmd</code></a></small>
      <div class="d-none name"><code>climate_data.Rmd</code></div>
    </div>

    
    
<p><strong>ColOpenData</strong> can be used to access open climate data
from Colombia. This climate data is retrieved from the Institute of
Hydrology, Meteorology and Environmental Studies <a href="http://www.ideam.gov.co/" class="external-link">(IDEAM)</a>. The climate module allows
the user to consult climate data for any Region of Interest (ROI) inside
the country and aggregate for different frequencies like day, week,
month or year.</p>
<p>The available information from IDEAM can be accessed using specific
internal tags as follows:</p>
<table class="table">
<thead><tr class="header">
<th align="left">Tags</th>
<th align="left">Variable</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">TSSM_CON</td>
<td align="left">Dry-bulb Temperature</td>
</tr>
<tr class="even">
<td align="left">THSM_CON</td>
<td align="left">Wet-bulb Temperature</td>
</tr>
<tr class="odd">
<td align="left">TMN_CON</td>
<td align="left">Minimum Temperature</td>
</tr>
<tr class="even">
<td align="left">TMX_CON</td>
<td align="left">Maximum Temperature</td>
</tr>
<tr class="odd">
<td align="left">TSTG_CON</td>
<td align="left">Dry-bulb Temperature (Termograph)</td>
</tr>
<tr class="even">
<td align="left">HR_CAL</td>
<td align="left">Relative Humidity</td>
</tr>
<tr class="odd">
<td align="left">HRHG_CON</td>
<td align="left">Relative Humidity (Hydrograph)</td>
</tr>
<tr class="even">
<td align="left">TV_CAL</td>
<td align="left">Vapour Pressure</td>
</tr>
<tr class="odd">
<td align="left">TPR_CAL</td>
<td align="left">Dew Point</td>
</tr>
<tr class="even">
<td align="left">PTPM_CON</td>
<td align="left">Precipitation (Daily)</td>
</tr>
<tr class="odd">
<td align="left">PTPG_CON</td>
<td align="left">Precipitation (Hourly)</td>
</tr>
<tr class="even">
<td align="left">EVTE_CON</td>
<td align="left">Evaporation</td>
</tr>
<tr class="odd">
<td align="left">FA_CON</td>
<td align="left">Atmospheric Phenomenon</td>
</tr>
<tr class="even">
<td align="left">NB_CON</td>
<td align="left">Cloudiness</td>
</tr>
<tr class="odd">
<td align="left">RCAM_CON</td>
<td align="left">Wind Trajectory</td>
</tr>
<tr class="even">
<td align="left">BSHG_CON</td>
<td align="left">Solar Luminosity</td>
</tr>
<tr class="odd">
<td align="left">VVAG_CON</td>
<td align="left">Wind Speed</td>
</tr>
<tr class="even">
<td align="left">DVAG_CON</td>
<td align="left">Wind Direction</td>
</tr>
<tr class="odd">
<td align="left">VVMXAG_CON</td>
<td align="left">Maximum Wind Speed</td>
</tr>
<tr class="even">
<td align="left">DVMXAG_CON</td>
<td align="left">Maximum Wind Direction</td>
</tr>
</tbody>
</table>
<p>Each observation is subject to to the availability of stations in the
ROI and the stations’ status (active, maintenance or suspended).</p>
<p>For this example we will retrieve data for the city of Manizales in
Colombia. We will download Dry-bulb temperature from 2013 to 2016, to
observe the increase in temperature during 2015 and 2016 due to the
impact of El Nino (ENSO).</p>
<p>We will start by loading the necessary libraries.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/epiverse-trace/ColOpenData" class="external-link">ColOpenData</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/leaflet/" class="external-link">leaflet</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="retrieving-climate-data-for-a-region-of-interest-roi-using-stations-data">Retrieving climate data for a Region of Interest (ROI) using
stations’ data<a class="anchor" aria-label="anchor" href="#retrieving-climate-data-for-a-region-of-interest-roi-using-stations-data"></a>
</h2>
<p>For this example, we will need to create a spatial polygon around the
city of Manizales and use that as our ROI to retrieve the climate data.
To create the spatial polygon we need to introduce the coordinates of
the geometry. For simplicity, we will build a box by introducing the 4
points which bound the box, and transform the created geometry into an
<code>sf</code> object (see <a href="https://r-spatial.github.io/sf/articles/sf1.html" class="external-link"><strong>sf</strong></a>
library for further details). For visualization we will use
<strong>leaflet</strong>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define coordinates (Bounding box around Manizales)</span></span>
<span><span class="va">lat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5.166278</span>, <span class="fl">5.166278</span>, <span class="fl">4.982247</span>, <span class="fl">4.982247</span>, <span class="fl">5.166278</span><span class="op">)</span></span>
<span><span class="va">lon</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">75.678072</span>, <span class="op">-</span><span class="fl">75.327859</span>, <span class="op">-</span><span class="fl">75.327859</span>, <span class="op">-</span><span class="fl">75.678072</span>, <span class="op">-</span><span class="fl">75.678072</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use sf to create a polygon and turn it into a geometry</span></span>
<span><span class="va">polygon</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">lon</span>, <span class="va">lat</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Turn geometry into sf object</span></span>
<span><span class="va">roi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">polygon</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot polygon for reference</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/leaflet.html" class="external-link">leaflet</a></span><span class="op">(</span><span class="va">roi</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/addProviderTiles.html" class="external-link">addProviderTiles</a></span><span class="op">(</span><span class="st">"OpenStreetMap"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html" class="external-link">addPolygons</a></span><span class="op">(</span></span>
<span>    stroke <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    weight <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"#2e6930"</span>,</span>
<span>    fillColor <span class="op">=</span> <span class="st">"#2e6930"</span>,</span>
<span>    opacity <span class="op">=</span> <span class="fl">0.6</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-e2e5c815c6389dc703b9" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-e2e5c815c6389dc703b9">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenStreetMap",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPolygons","args":[[[[{"lng":[-75.678072,-75.327859,-75.327859,-75.678072,-75.678072],"lat":[5.166278,5.166278,4.982247,4.982247,5.166278]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"#2e6930","weight":2,"opacity":0.6,"fill":true,"fillColor":"#2e6930","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[4.982247,5.166278],"lng":[-75.678072,-75.327859]}},"evals":[],"jsHooks":[]}</script><p>With our new ROI, we can make a first exploration to check if there
are any stations contained inside of it, using the function
<code>stations_in_roi</code></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stations</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stations_in_roi.html">stations_in_roi</a></span><span class="op">(</span><span class="va">roi</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">stations</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 129 features and 20 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -75.67119 ymin: 4.983333 xmax: -75.33222 ymax: 5.163167</span></span>
<span><span class="co">#&gt; CRS:           NA</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;        codigo                           nombre              categoria</span></span>
<span><span class="co">#&gt; 138  26155220      VILLAMARIA - AUT [26155220]    Climática Principal</span></span>
<span><span class="co">#&gt; 139  26155210         TORRE 4 - AUT [26155210]    Climática Principal</span></span>
<span><span class="co">#&gt; 140  26155230            EMAS - AUT [26155230]    Climática Principal</span></span>
<span><span class="co">#&gt; 266  26155110   AEROPUERTO LA NUBIA [26155110]    Sinóptica Principal</span></span>
<span><span class="co">#&gt; 749  26155170 TESORITO FINCA  - AUT [26155170]    Climática Ordinaria</span></span>
<span><span class="co">#&gt; 1119 26157090              PLAYA LA [26157090]           Limnimétrica</span></span>
<span><span class="co">#&gt; 2157 26157100           SAN GABRIEL [26157100]           Limnimétrica</span></span>
<span><span class="co">#&gt; 2312 26157060             RIO CLARO [26157060]           Limnimétrica</span></span>
<span><span class="co">#&gt; 2314 26155160             PALESTINA [26155160] Meteorológica Especial</span></span>
<span><span class="co">#&gt; 2326 26157080            CHUPADEROS [26157080]           Limnigráfica</span></span>
<span><span class="co">#&gt;                     tecnologia     estado departamento  municipio  latitud</span></span>
<span><span class="co">#&gt; 138  Automática con Telemetría     Activa       Caldas Villamaria 5.048667</span></span>
<span><span class="co">#&gt; 139  Automática con Telemetría Suspendida       Caldas  Manizales 5.060778</span></span>
<span><span class="co">#&gt; 140  Automática con Telemetría     Activa       Caldas  Manizales 5.085250</span></span>
<span><span class="co">#&gt; 266               Convencional     Activa       Caldas  Manizales 5.029778</span></span>
<span><span class="co">#&gt; 749  Automática con Telemetría     Activa       Caldas  Manizales 5.032222</span></span>
<span><span class="co">#&gt; 1119              Convencional Suspendida       Caldas  Manizales 5.100000</span></span>
<span><span class="co">#&gt; 2157              Convencional     Activa       Caldas  Manizales 5.119306</span></span>
<span><span class="co">#&gt; 2312              Convencional Suspendida       Caldas Villamaria 5.000000</span></span>
<span><span class="co">#&gt; 2314              Convencional Suspendida       Caldas  Chinchina 5.016667</span></span>
<span><span class="co">#&gt; 2326              Convencional Suspendida       Caldas  Manizales 5.028944</span></span>
<span><span class="co">#&gt;       longitud altitud   fecha_instalacion</span></span>
<span><span class="co">#&gt; 138  -75.51389    1906 2004-06-14 00:00:00</span></span>
<span><span class="co">#&gt; 139  -75.35611    3787 2004-07-14 00:00:00</span></span>
<span><span class="co">#&gt; 140  -75.50714    2211 2004-06-10 00:00:00</span></span>
<span><span class="co">#&gt; 266  -75.46992    2104 1968-06-15 00:00:00</span></span>
<span><span class="co">#&gt; 749  -75.43833    2325 1992-10-14 19:00:00</span></span>
<span><span class="co">#&gt; 1119 -75.51667     250 1984-07-15 00:00:00</span></span>
<span><span class="co">#&gt; 2157 -75.56472    1173 1984-07-15 00:00:00</span></span>
<span><span class="co">#&gt; 2312 -75.55000    1530 1984-08-15 00:00:00</span></span>
<span><span class="co">#&gt; 2314 -75.51667    1500 1989-02-15 00:00:00</span></span>
<span><span class="co">#&gt; 2326 -75.47617      21 1984-07-15 00:00:00</span></span>
<span><span class="co">#&gt;                              area_operativa         corriente area_hidrografica</span></span>
<span><span class="co">#&gt; 138  Area Operativa 09 - Cauca-Valle-Caldas          San Juan   Magdalena Cauca</span></span>
<span><span class="co">#&gt; 139  Area Operativa 09 - Cauca-Valle-Caldas          San Juan   Magdalena Cauca</span></span>
<span><span class="co">#&gt; 140  Area Operativa 09 - Cauca-Valle-Caldas          San Juan   Magdalena Cauca</span></span>
<span><span class="co">#&gt; 266  Area Operativa 09 - Cauca-Valle-Caldas           Orinoco   Magdalena Cauca</span></span>
<span><span class="co">#&gt; 749  Area Operativa 09 - Cauca-Valle-Caldas                 0   Magdalena Cauca</span></span>
<span><span class="co">#&gt; 1119 Area Operativa 09 - Cauca-Valle-Caldas Quebrada Olivares   Magdalena Cauca</span></span>
<span><span class="co">#&gt; 2157 Area Operativa 09 - Cauca-Valle-Caldas          Guacaica   Magdalena Cauca</span></span>
<span><span class="co">#&gt; 2312 Area Operativa 09 - Cauca-Valle-Caldas             Claro   Magdalena Cauca</span></span>
<span><span class="co">#&gt; 2314 Area Operativa 09 - Cauca-Valle-Caldas           Villeta   Magdalena Cauca</span></span>
<span><span class="co">#&gt; 2326 Area Operativa 09 - Cauca-Valle-Caldas         Chinchina   Magdalena Cauca</span></span>
<span><span class="co">#&gt;      zona_hidrografica subzona_hidrografica</span></span>
<span><span class="co">#&gt; 138              Cauca        Río Chinchiná</span></span>
<span><span class="co">#&gt; 139    Medio Magdalena          Río Guarinó</span></span>
<span><span class="co">#&gt; 140              Cauca        Río Chinchiná</span></span>
<span><span class="co">#&gt; 266              Cauca        Río Chinchiná</span></span>
<span><span class="co">#&gt; 749              Cauca        Río Chinchiná</span></span>
<span><span class="co">#&gt; 1119             Cauca        Río Chinchiná</span></span>
<span><span class="co">#&gt; 2157             Cauca        Río Chinchiná</span></span>
<span><span class="co">#&gt; 2312             Cauca        Río Chinchiná</span></span>
<span><span class="co">#&gt; 2314             Cauca        Río Chinchiná</span></span>
<span><span class="co">#&gt; 2326             Cauca        Río Chinchiná</span></span>
<span><span class="co">#&gt;                                                          entidad</span></span>
<span><span class="co">#&gt; 138  INSTITUTO DE HIDROLOGIA METEOROLOGIA Y ESTUDIOS AMBIENTALES</span></span>
<span><span class="co">#&gt; 139  INSTITUTO DE HIDROLOGIA METEOROLOGIA Y ESTUDIOS AMBIENTALES</span></span>
<span><span class="co">#&gt; 140  INSTITUTO DE HIDROLOGIA METEOROLOGIA Y ESTUDIOS AMBIENTALES</span></span>
<span><span class="co">#&gt; 266  INSTITUTO DE HIDROLOGIA METEOROLOGIA Y ESTUDIOS AMBIENTALES</span></span>
<span><span class="co">#&gt; 749  INSTITUTO DE HIDROLOGIA METEOROLOGIA Y ESTUDIOS AMBIENTALES</span></span>
<span><span class="co">#&gt; 1119 INSTITUTO DE HIDROLOGIA METEOROLOGIA Y ESTUDIOS AMBIENTALES</span></span>
<span><span class="co">#&gt; 2157 INSTITUTO DE HIDROLOGIA METEOROLOGIA Y ESTUDIOS AMBIENTALES</span></span>
<span><span class="co">#&gt; 2312 INSTITUTO DE HIDROLOGIA METEOROLOGIA Y ESTUDIOS AMBIENTALES</span></span>
<span><span class="co">#&gt; 2314 INSTITUTO DE HIDROLOGIA METEOROLOGIA Y ESTUDIOS AMBIENTALES</span></span>
<span><span class="co">#&gt; 2326 INSTITUTO DE HIDROLOGIA METEOROLOGIA Y ESTUDIOS AMBIENTALES</span></span>
<span><span class="co">#&gt;      fecha_suspension mpio_cdpmp dpto_ccdgo                   geometry</span></span>
<span><span class="co">#&gt; 138              &lt;NA&gt;      17873         17 POINT (-75.51389 5.048667)</span></span>
<span><span class="co">#&gt; 139        2010-09-29      17446         17 POINT (-75.35611 5.060778)</span></span>
<span><span class="co">#&gt; 140              &lt;NA&gt;      17001         17  POINT (-75.50714 5.08525)</span></span>
<span><span class="co">#&gt; 266              &lt;NA&gt;      17001         17 POINT (-75.46992 5.029778)</span></span>
<span><span class="co">#&gt; 749              &lt;NA&gt;      17001         17 POINT (-75.43833 5.032222)</span></span>
<span><span class="co">#&gt; 1119       1996-04-15      17001         17      POINT (-75.51667 5.1)</span></span>
<span><span class="co">#&gt; 2157             &lt;NA&gt;      17001         17 POINT (-75.56472 5.119306)</span></span>
<span><span class="co">#&gt; 2312       1995-05-15      17873         17           POINT (-75.55 5)</span></span>
<span><span class="co">#&gt; 2314       1992-11-15      17873         17 POINT (-75.51667 5.016667)</span></span>
<span><span class="co">#&gt; 2326       2016-01-06      17001         17 POINT (-75.47617 5.028944)</span></span></code></pre></div>
<p>We can see that in the region there are 129 stations. Different
categories are recorded by different stations, and can be checked at the
column <em>categoria</em>. To understand the category of each station we
can use the definition catalog provided by DANE <a href="http://www.ideam.gov.co/documents/10182/557765/Definiciones+CNE.pdf/25e1cca5-ee47-4eaf-86c0-c4f5192a9937" class="external-link">here</a>.
Stations under the categories <em>Climática Principal</em> and
<em>Climática Ordinaria</em> have records of Dry-bulb temperature.</p>
<p>Some stations are suspended, which means they are not taking
measurements at the moment. This information is found at the column
<em>estado</em> or, if the observation at <em>fecha_suspension</em> is
different from <code>NA</code>, since active stations do not have a
suspension date. However, even if a station is suspended, the historical
data (up to the suspension date) can be accessed.</p>
<p>To filter the stations that recorded information during the desired
period, we can delete the stations with suspension dates before
2013.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Working stations after 2013</span></span>
<span><span class="va">w_stations</span> <span class="op">&lt;-</span> <span class="va">stations</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">fecha_suspension</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2013-01-01"</span><span class="op">)</span> <span class="op">|</span></span>
<span>    <span class="va">estado</span> <span class="op">==</span> <span class="st">"Activa"</span><span class="op">)</span></span>
<span><span class="co"># Filtering for categories</span></span>
<span><span class="va">cw_stations</span> <span class="op">&lt;-</span> <span class="va">w_stations</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">categoria</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Climática Principal"</span>, <span class="st">"Climática Ordinaria"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print stations</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">cw_stations</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 40 features and 20 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -75.66667 ymin: 4.983333 xmax: -75.33222 ymax: 5.158472</span></span>
<span><span class="co">#&gt; CRS:           NA</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;        codigo                                      nombre           categoria</span></span>
<span><span class="co">#&gt; 1    26155220                 VILLAMARIA - AUT [26155220] Climática Principal</span></span>
<span><span class="co">#&gt; 2    26155230                       EMAS - AUT [26155230] Climática Principal</span></span>
<span><span class="co">#&gt; 3    26155170            TESORITO FINCA  - AUT [26155170] Climática Ordinaria</span></span>
<span><span class="co">#&gt; 4  2615500122 LA ESPERANZA ANDALUCIA - AUT   [2615500122] Climática Principal</span></span>
<span><span class="co">#&gt; 5    26155190                    ALGARROBO EL  [26155190] Climática Principal</span></span>
<span><span class="co">#&gt; 6    26155090                      SANTAGUEDA  [26155090] Climática Principal</span></span>
<span><span class="co">#&gt; 7    26155180                            EMAS  [26155180] Climática Principal</span></span>
<span><span class="co">#&gt; 8    26135270                        PLANALTO  [26135270] Climática Principal</span></span>
<span><span class="co">#&gt; 9    26155504                 LA SIRIA  - AUT  [26155504] Climática Principal</span></span>
<span><span class="co">#&gt; 10   26155020                        CENICAFE  [26155020] Climática Principal</span></span>
<span><span class="co">#&gt;                   tecnologia estado departamento          municipio  latitud</span></span>
<span><span class="co">#&gt; 1  Automática con Telemetría Activa       Caldas         Villamaria 5.048667</span></span>
<span><span class="co">#&gt; 2  Automática con Telemetría Activa       Caldas          Manizales 5.085250</span></span>
<span><span class="co">#&gt; 3  Automática con Telemetría Activa       Caldas          Manizales 5.032222</span></span>
<span><span class="co">#&gt; 4  Automática con Telemetría Activa       Caldas          Manizales 5.017778</span></span>
<span><span class="co">#&gt; 5               Convencional Activa       Caldas          Manizales 5.066667</span></span>
<span><span class="co">#&gt; 6               Convencional Activa       Caldas Palestina (Caldas) 5.083333</span></span>
<span><span class="co">#&gt; 7               Convencional Activa       Caldas          Manizales 5.083333</span></span>
<span><span class="co">#&gt; 8               Convencional Activa       Caldas          Chinchina 4.983333</span></span>
<span><span class="co">#&gt; 9  Automática con Telemetría Activa       Caldas          Manizales 5.022997</span></span>
<span><span class="co">#&gt; 10              Convencional Activa       Caldas          Chinchina 4.983333</span></span>
<span><span class="co">#&gt;     longitud altitud   fecha_instalacion                         area_operativa</span></span>
<span><span class="co">#&gt; 1  -75.51389    1906 2004-06-14 00:00:00 Area Operativa 09 - Cauca-Valle-Caldas</span></span>
<span><span class="co">#&gt; 2  -75.50714    2211 2004-06-10 00:00:00 Area Operativa 09 - Cauca-Valle-Caldas</span></span>
<span><span class="co">#&gt; 3  -75.43833    2325 1992-10-14 19:00:00 Area Operativa 09 - Cauca-Valle-Caldas</span></span>
<span><span class="co">#&gt; 4  -75.35658    3316 2017-04-19 19:00:00 Area Operativa 09 - Cauca-Valle-Caldas</span></span>
<span><span class="co">#&gt; 5  -75.58333    1202 1992-11-15 00:00:00 Area Operativa 09 - Cauca-Valle-Caldas</span></span>
<span><span class="co">#&gt; 6  -75.66667    1010 1964-01-15 00:00:00 Area Operativa 09 - Cauca-Valle-Caldas</span></span>
<span><span class="co">#&gt; 7  -75.51667    2046 1997-06-15 00:00:00 Area Operativa 09 - Cauca-Valle-Caldas</span></span>
<span><span class="co">#&gt; 8  -75.58333    1406 1993-03-15 00:00:00 Area Operativa 09 - Cauca-Valle-Caldas</span></span>
<span><span class="co">#&gt; 9  -75.55300     999                &lt;NA&gt; Area Operativa 09 - Cauca-Valle-Caldas</span></span>
<span><span class="co">#&gt; 10 -75.58333    1310 1941-04-15 00:00:00 Area Operativa 09 - Cauca-Valle-Caldas</span></span>
<span><span class="co">#&gt;            corriente area_hidrografica zona_hidrografica subzona_hidrografica</span></span>
<span><span class="co">#&gt; 1           San Juan   Magdalena Cauca             Cauca        Río Chinchiná</span></span>
<span><span class="co">#&gt; 2           San Juan   Magdalena Cauca             Cauca        Río Chinchiná</span></span>
<span><span class="co">#&gt; 3                  0   Magdalena Cauca             Cauca        Río Chinchiná</span></span>
<span><span class="co">#&gt; 4                  0   Magdalena Cauca             Cauca        Río Chinchiná</span></span>
<span><span class="co">#&gt; 5  Qda Santa Barbara   Magdalena Cauca             Cauca        Río Chinchiná</span></span>
<span><span class="co">#&gt; 6  Qda Santa Barbara   Magdalena Cauca             Cauca        Río Chinchiná</span></span>
<span><span class="co">#&gt; 7  Qda Santa Barbara   Magdalena Cauca             Cauca        Río Chinchiná</span></span>
<span><span class="co">#&gt; 8            Bituima   Magdalena Cauca             Cauca        Río Chinchiná</span></span>
<span><span class="co">#&gt; 9        Campoalegre   Magdalena Cauca             Cauca        Río Chinchiná</span></span>
<span><span class="co">#&gt; 10 Qda Santa Barbara   Magdalena Cauca             Cauca        Río Chinchiná</span></span>
<span><span class="co">#&gt;                                                        entidad fecha_suspension</span></span>
<span><span class="co">#&gt; 1  INSTITUTO DE HIDROLOGIA METEOROLOGIA Y ESTUDIOS AMBIENTALES             &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2  INSTITUTO DE HIDROLOGIA METEOROLOGIA Y ESTUDIOS AMBIENTALES             &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3  INSTITUTO DE HIDROLOGIA METEOROLOGIA Y ESTUDIOS AMBIENTALES             &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4  INSTITUTO DE HIDROLOGIA METEOROLOGIA Y ESTUDIOS AMBIENTALES             &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5                             FEDERACION NACIONAL DE CAFETEROS             &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6                             FEDERACION NACIONAL DE CAFETEROS             &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 7                                      ESTACIONES PARTICULARES             &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 8                             FEDERACION NACIONAL DE CAFETEROS             &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 9                                                     CENICAFE             &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 10                            FEDERACION NACIONAL DE CAFETEROS             &lt;NA&gt;</span></span>
<span><span class="co">#&gt;    mpio_cdpmp dpto_ccdgo                   geometry</span></span>
<span><span class="co">#&gt; 1       17873         17 POINT (-75.51389 5.048667)</span></span>
<span><span class="co">#&gt; 2       17001         17  POINT (-75.50714 5.08525)</span></span>
<span><span class="co">#&gt; 3       17001         17 POINT (-75.43833 5.032222)</span></span>
<span><span class="co">#&gt; 4       17001         17 POINT (-75.35658 5.017778)</span></span>
<span><span class="co">#&gt; 5       17001         17 POINT (-75.58333 5.066667)</span></span>
<span><span class="co">#&gt; 6       17524         17 POINT (-75.66667 5.083333)</span></span>
<span><span class="co">#&gt; 7       17001         17 POINT (-75.51667 5.083333)</span></span>
<span><span class="co">#&gt; 8       17873         17 POINT (-75.58333 4.983333)</span></span>
<span><span class="co">#&gt; 9       17001         17   POINT (-75.553 5.022997)</span></span>
<span><span class="co">#&gt; 10      17873         17 POINT (-75.58333 4.983333)</span></span></code></pre></div>
<p>From the original 129 stations, 40 were working for some or the whole
period of interest and collected information for Dry-bulb temperature.
With this information, we can access the Dry-bulb temperature from 2013
to 2016. To do so, we can use the function
<code>download_climate_data</code>. This function has the following
parameters:</p>
<ul>
<li>
<code>stations</code> numeric vector containing the stations’
codes</li>
<li>
<code>start_date</code>: character with the first date to consult in
the format <code>"YYYY-MM-DD"</code>
</li>
<li>
<code>end_date</code>: character with the last date to consult in
the format <code>"YYYY-MM_DD"</code>. (Last available date is
<code>"2023-05-31"</code>
</li>
<li>
<code>frequency</code>: character with the aggregation frequency.
(<code>"day"</code>, <code>"week"</code>, <code>"month"</code> or
<code>"year"</code>)</li>
<li>
<code>tags</code>: character containing climate tags to consult</li>
<li>
<code>aggregate</code>: logical for data aggregation, if
<code>FALSE</code>, returns the data from each individual station in the
area. (Default = <code>TRUE</code>)</li>
</ul>
<p>Stations’ codes are obtained from the column <code>codigo</code> in
the stations data.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db_temperature_stations</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/download_climate_data.html">download_climate_data</a></span><span class="op">(</span></span>
<span>  stations <span class="op">=</span> <span class="va">w_stations</span><span class="op">$</span><span class="va">codigo</span>,</span>
<span>  start_date <span class="op">=</span> <span class="st">"2013-01-01"</span>,</span>
<span>  end_date <span class="op">=</span> <span class="st">"2016-12-31"</span>,</span>
<span>  frequency <span class="op">=</span> <span class="st">"day"</span>,</span>
<span>  tags <span class="op">=</span> <span class="st">"TSSM_CON"</span>,</span>
<span>  aggregate <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26155220 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26155230 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26157100 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26157080 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150160 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26157020 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26160100 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500122 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150030 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150040 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150050 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26155190 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26155090 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26155180 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26157150 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 23020130 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150340 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150360 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150410 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150420 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150310 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150140 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150200 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150400 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150130 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150370 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150390 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26157010 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26157050 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26130160 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26130470 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26135270 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150220 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150280 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26155504 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150380 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26155020 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26155502 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 24025070 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26137030 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150080 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150260 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26157030 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150210 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26155200 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150090 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150180 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150350 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 23025502 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150070 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150250 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150300 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26155050 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26157130 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26150190 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 26155503 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500011 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500005 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500008 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700040 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500012 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700045 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700046 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500015 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700048 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500021 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700053 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700056 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700061 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500026 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700066 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500028 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700067 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500031 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500033 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700074 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700076 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2613700077 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700079 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700080 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700082 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500035 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500013 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700041 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700042 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700043 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700044 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500014 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500016 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700049 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500018 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700050 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500019 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500020 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500022 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500023 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700054 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700055 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500024 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500025 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700058 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700059 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500027 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700064 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700065 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500029 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700068 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700073 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615500034 is not available</span></span>
<span><span class="co">#&gt; Warning in value[[3L]](cond): Station 2615700001 is not available</span></span></code></pre></div>
<p>With the stations’ downloaded data we can plot the time series for
the four years of interest.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">db_temperature_stations</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">TSSM_CON</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"#106ba0"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Dry-bulb Temperature"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Date"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Dry-bulb temperature [C]"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 61 rows containing missing values (`geom_line()`).</span></span></code></pre></div>
<p><img src="climate_data_files/figure-html/plot%20temperatures%20stations-1.png" width="700"></p>
<p>The warning obtained indicates that there were no records for 61 of
the consulted days. This might be due to stations being under
maintenance.</p>
</div>
<div class="section level2">
<h2 id="retrieving-climate-data-for-a-region-of-interest-roi">Retrieving climate data for a Region of Interest (ROI)<a class="anchor" aria-label="anchor" href="#retrieving-climate-data-for-a-region-of-interest-roi"></a>
</h2>
<p>To retrieve climate data for any ROI in the country, without manually
manipulating the stations’ data, we can use the function
<code>download_climate_geom</code>. The function has the following
parameters:</p>
<ul>
<li>
<code>geometry</code>: <code>sf</code> geometry containing the
geometry for a given ROI. This geometry can be either a
<code>POLYGON</code> or <code>MULTIPOLYGON</code>
</li>
<li>
<code>start_date</code>: character with the first date to consult in
the format <code>"YYYY-MM-DD"</code>
</li>
<li>
<code>end_date</code>: character with the last date to consult in
the format <code>"YYYY-MM_DD"</code>. (Last available date is
<code>"2023-05-31"</code>
</li>
<li>
<code>frequency</code>: character with the aggregation frequency.
(<code>"day"</code>, <code>"week"</code>, <code>"month"</code> or
<code>"year"</code>)</li>
<li>
<code>tags</code>: character containing climate tags to consult</li>
<li>
<code>aggregate</code>: logical for data aggregation, if
<code>FALSE</code>, returns the data from each individual station in the
area. (Default = <code>TRUE</code>)</li>
</ul>
<p>We will use the same ROI created for the previous example.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db_temperature_roi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/download_climate_geom.html">download_climate_geom</a></span><span class="op">(</span></span>
<span>  geometry <span class="op">=</span> <span class="va">roi</span>,</span>
<span>  start_date <span class="op">=</span> <span class="st">"2013-01-01"</span>,</span>
<span>  end_date <span class="op">=</span> <span class="st">"2016-12-31"</span>,</span>
<span>  frequency <span class="op">=</span> <span class="st">"day"</span>,</span>
<span>  tags <span class="op">=</span> <span class="st">"TSSM_CON"</span>,</span>
<span>  aggregate <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">db_temperature_roi</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">TSSM_CON</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"#106ba0"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Dry-bulb Temperature"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Date"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Dry-bulb temperature [C]"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 61 rows containing missing values (`geom_line()`).</span></span></code></pre></div>
<p><img src="climate_data_files/figure-html/plot%20temperatures%20roi-1.png" width="700"></p>
<p>As we can see, the results are exactly the same as before.</p>
</div>
<div class="section level2">
<h2 id="retrieving-climate-data-for-municipality">Retrieving climate data for municipality<a class="anchor" aria-label="anchor" href="#retrieving-climate-data-for-municipality"></a>
</h2>
<p>To make the download process even easier, and avoid the creation of
already known geometries like municipalities or departments,
<strong>ColOpenData</strong> offers an extra function to download data
using the areas’ DIVIPOLA code.</p>
<p>DIVIPOLA codification is standardized for the whole country, and
contains department’s and municipalities’ codes. Departments have two
digits for individual identification, while municipalities have three;
however, for the usage of this function at the level of municipalities,
we need to concatenate both, obtaining a five digit number with
department and municipality codes. The codes for each municipality and
department can be consulted in the following <a href="https://www.datos.gov.co/widgets/gdxc-w37w" class="external-link">table</a>.</p>
<p>To replicate our previous example we only need the code for
Manizales, which is “17001”, which means the code for the department
Caldas is “17” and the code for Manizales inside that department is
“001”.</p>
<p>The function <code>download_climate</code> will require almost the
same arguments than <code>download_climate_geom</code>, but replace the
<code>sf</code> object for a character containing the DIVIPOLA code:</p>
<ul>
<li>
<code>code</code>: character with the DIVIPOLA code for the
area</li>
<li>
<code>start_date</code>: character with the first date to consult in
the format <code>"YYYY-MM-DD"</code>
</li>
<li>
<code>end_date</code>: character with the last date to consult in
the format <code>"YYYY-MM_DD"</code>. (Last available date is
<code>"2023-05-31"</code>
</li>
<li>
<code>frequency</code>: character with the aggregation frequency.
(<code>"day"</code>, <code>"week"</code>, <code>"month"</code> or
<code>"year"</code>)</li>
<li>
<code>tags</code>: character containing climate tags to consult</li>
<li>
<code>aggregate</code>: logical for data aggregation, if
<code>FALSE</code>, returns the data from each individual station in the
area. (Default = <code>TRUE</code>)</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db_temperature_mpio</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/download_climate.html">download_climate</a></span><span class="op">(</span></span>
<span>  code <span class="op">=</span> <span class="st">"17001"</span>,</span>
<span>  start_date <span class="op">=</span> <span class="st">"2013-01-01"</span>,</span>
<span>  end_date <span class="op">=</span> <span class="st">"2016-12-31"</span>,</span>
<span>  frequency <span class="op">=</span> <span class="st">"day"</span>,</span>
<span>  tags <span class="op">=</span> <span class="st">"TSSM_CON"</span>,</span>
<span>  aggregate <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">db_temperature_mpio</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">TSSM_CON</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"#106ba0"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Dry-bulb Temperature"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Date"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Dry-bulb temperature [C]"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 61 rows containing missing values (`geom_line()`).</span></span></code></pre></div>
<p><img src="climate_data_files/figure-html/plot%20temperatures%20mpios-1.png" width="700"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Maria Camila Tavera Cifuentes, Julian Otero, Juan D. Umana, Juan F. Montenegro.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
